{% extends 'base.html'%}
{% csrf_token %} <!--hadi dyal modifier-->
<h3>Consultation et demande de changement de cours programm√©s</h3>
<form method="post">
    {% csrf_token %}
    <table>
        <tr>
            <th>Current Courses</th>
        </tr>
        {% for schedule in courses %}
            <tr>
                <td>{{ schedule.course.module.name }} - {{ schedule.time_slot.day }} {{ schedule.time_slot.start_time }} - {{ schedule.time_slot.end_time }}</td>
                <td><button type="button" class="select-current" data-timeslot="{{ course.time_slot.id }}">Select</button></td>
            </tr>
        {% endfor %}
    </table>
    <input type="hidden" name="current_timeslot" id="current-timeslot">
    <table>
        <tr>
            <th>Available Time Slots</th>
        </tr>
        {% for timeslot in timeslots %}
            <tr>
                <td>{{ timeslot.day }} {{ timeslot.start_time }} - {{ timeslot.end_time }}</td>
                <td><button type="button" class="select-new" data-timeslot="{{ timeslot.id }}">Select</button></td>
            </tr>
        {% endfor %}
    </table>
    <input type="hidden" name="new_timeslot" id="new-timeslot">
    <button type="submit">Request Change</button>
</form>
<script>
    document.querySelectorAll('.select-current').forEach(button => {
        button.addEventListener('click', () => {
            document.getElementById('current-timeslot').value = button.getAttribute('data-timeslot');
        });
    });
    document.querySelectorAll('.select-new').forEach(button => {
        button.addEventListener('click', () => {
            document.getElementById('new-timeslot').value = button.getAttribute('data-timeslot');
        });
    });
</script>
